import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.Z6aMusZW.js";import{B as c}from"./button.BWaXVklz.js";import{I as j}from"./input.DYfGnR1o.js";import{L as m}from"./label.ByuxEscq.js";import{T as E}from"./textarea.ntLCWltE.js";import{C as F,a as L,b as A,c as D,d as U}from"./card.YuvTJRVG.js";import{A as g,a as v}from"./alert.BWe5-cIC.js";import{S as d}from"./skeleton.B3vSOSjr.js";import{U as B}from"./users.DbM1g3zt.js";import{A as k}from"./arrow-left.DTOvvTq7.js";import{C as R}from"./circle-alert.DSB0BqUH.js";import{C as P}from"./circle-check-big.C0mK4qk5.js";import{I as O}from"./info.COjwR0tB.js";import{L as $}from"./loader-circle.DAcaG-Yh.js";import{S as q}from"./save.BcFhAao1.js";import{X as H}from"./x.B_0Xwiyu.js";import"./utils.CDN07tui.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./createLucideIcon.DXTouTbc.js";function le({teamId:t}){const[N,h]=o.useState(!!t),[i,p]=o.useState(!1),[x,l]=o.useState(""),[w,f]=o.useState(!1),[r,n]=o.useState({name:"",logo:"",description:""});o.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{h(!0);const s=await fetch(`/api/teams/${t}`);if(!s.ok)throw new Error("Failed to fetch team");const a=await s.json();n({name:a.name,logo:a.logo||"",description:a.description||""})}catch(s){l(s.message||"Failed to load team")}finally{h(!1)}},b=async s=>{s.preventDefault(),p(!0),l(""),f(!1);try{const a=t?`/api/teams/${t}`:"/api/teams",C=t?"PUT":"POST",S={name:r.name.trim(),logo:r.logo.trim()||void 0,description:r.description.trim()||void 0},u=await fetch(a,{method:C,headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!u.ok){const T=await u.json();throw new Error(T.error||"Failed to save team")}f(!0),setTimeout(()=>{window.location.href="/admin/teams"},1500)}catch(a){l(a.message||"Failed to save team")}finally{p(!1)}};return N?e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{className:"h-12 w-full"}),e.jsx(d,{className:"h-64 w-full"}),e.jsx(d,{className:"h-12 w-full"})]}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[e.jsx(B,{className:"h-8 w-8"}),t?"Edit Team":"Create New Team"]}),e.jsx("p",{className:"text-muted-foreground",children:t?"Update team details and information":"Add a new team to your site"})]}),e.jsx(c,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/teams","data-astro-prefetch":!0,children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Back to List"]})})]}),x&&e.jsxs(g,{variant:"destructive",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs(v,{children:[e.jsx("strong",{children:"Error:"})," ",x]})]}),w&&e.jsxs(g,{className:"border-green-500 bg-green-50 text-green-900",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs(v,{children:[e.jsx("strong",{children:"Success!"})," Team saved successfully! Redirecting..."]})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(L,{children:[e.jsx(A,{children:"Basic Information"}),e.jsx(D,{children:"Enter the team's details"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"name",children:["Team Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"name",type:"text",value:r.name,onChange:s=>n(a=>({...a,name:s.target.value})),required:!0,disabled:i,placeholder:"Enter team name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"logo",children:"Logo URL"}),e.jsx(j,{id:"logo",type:"url",value:r.logo,onChange:s=>n(a=>({...a,logo:s.target.value})),disabled:i,placeholder:"https://example.com/logo.png"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"URL to the team's logo image"]}),r.logo&&e.jsx("div",{className:"mt-2 border rounded-lg overflow-hidden",children:e.jsx("img",{src:r.logo,alt:"Preview",className:"w-full max-h-[300px] object-contain",onError:s=>{s.target.style.display="none"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(E,{id:"description",rows:4,value:r.description,onChange:s=>n(a=>({...a,description:s.target.value})),disabled:i,placeholder:"Enter team description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Brief description of the team"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c,{type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),t?"Update Team":"Create Team"]})}),e.jsx(c,{type:"button",variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/teams","data-astro-prefetch":!0,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Cancel"]})})]})]})]})}export{le as default};
