const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as de}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.Z6aMusZW.js";import{r as E}from"./types.DS8deZaU.js";import{B as i}from"./button.BWaXVklz.js";import{I as xe}from"./input.DYfGnR1o.js";import{C as A,d as D}from"./card.YuvTJRVG.js";import{B as h}from"./badge.DPtWg24B.js";import{S as me}from"./skeleton.B3vSOSjr.js";import{T as he,a as ue,b as W,c as n,d as je,e as c,D as X,f as Y,g as Z,h as u}from"./dropdown-menu.C-53F5K0.js";import"./utils.CDN07tui.js";import"./index.CTkzGMNT.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.UCZQMOc2.js";import"./index.B8x0sxYY.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function Ve(){const[ee,se]=t.useState([]),[re,L]=t.useState(!0),[P,f]=t.useState(""),[l,te]=t.useState(""),[j,V]=t.useState("table"),[le,ae]=t.useState({}),[r,ie]=t.useState({});t.useEffect(()=>{de(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{ie({Plus:s.Plus,Search:s.Search,List:s.List,Grid:s.Grid,Edit:s.Edit,Trash2:s.Trash2,CheckCircle:s.CheckCircle,Clock:s.Clock,AlertCircle:s.AlertCircle,Newspaper:s.Newspaper,User:s.User,Calendar:s.Calendar,Eye:s.Eye,Tag:s.Tag,FileText:s.FileText,Image:s.Image,Globe:s.Globe,RefreshCw:s.RefreshCw,MoreVertical:s.MoreVertical,MessageSquare:s.MessageSquare})})},[]),t.useEffect(()=>{k()},[]);const k=async()=>{try{L(!0);const s=await fetch("/api/news?admin=true");if(!s.ok)throw new Error("Failed to fetch articles");const T=await s.json();se(T);const a={};await Promise.all(T.map(async S=>{try{const O=await fetch(`/api/comments?articleId=${S.id}&admin=true`);if(O.ok){const ne=await O.json(),J=K=>Array.isArray(K)?K.reduce((ce,Q)=>{const oe=Q.replies?J(Q.replies):0;return ce+1+oe},0):0;a[S.id]=J(ne)}else a[S.id]=0}catch{a[S.id]=0}})),ae(a)}catch(s){f(s.message||"Failed to load articles")}finally{L(!1)}},G=async s=>{if(window.confirm(`Are you sure you want to delete this article?

This action cannot be undone.`))try{if(!(await fetch(`/api/news/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete article");f(""),k()}catch(a){f("Error deleting article: "+a.message),setTimeout(()=>f(""),5e3)}},F=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not published",M=ee.filter(s=>s.title.toLowerCase().includes(l.toLowerCase())||s.slug.toLowerCase().includes(l.toLowerCase())),R=s=>({Interviews:"#667eea",Championships:"#f5576c","Match report":"#4facfe",Analysis:"#43e97b"})[s]||"#64748b",g=r.Plus,p=r.Search,_=r.List,$=r.Grid,N=r.Edit,w=r.Trash2,o=r.CheckCircle,b=r.Clock,B=r.AlertCircle,C=r.Newspaper,d=r.User,x=r.Calendar,v=r.Eye,m=r.Tag,U=r.FileText,y=r.Image,q=r.Globe,H=r.RefreshCw,z=r.MoreVertical,I=r.MessageSquare;return re?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(me,{className:"h-16 w-full"},s))}):P?e.jsx(A,{className:"border-destructive",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[B?e.jsx(B,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Articles"}),e.jsx("p",{className:"text-muted-foreground",children:P})]}),e.jsxs(i,{onClick:k,variant:"default",children:[H?e.jsx(H,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[C?e.jsx(C,{size:28}):null,"News Articles"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your news articles and blog posts"})]}),e.jsx(i,{asChild:!0,children:e.jsxs("a",{href:"/admin/news/new","data-astro-prefetch":!0,children:[g?e.jsx(g,{size:18,className:"mr-2"}):null,"Create Article"]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"article-search",className:"sr-only",children:"Search articles"}),p?e.jsx(p,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(xe,{id:"article-search",type:"text",placeholder:"Search articles...",value:l,onChange:s=>te(s.target.value),className:"pl-10","aria-label":"Search articles by title or slug"})]}),e.jsxs("div",{className:"flex gap-2 bg-background p-1 rounded-lg border",children:[e.jsx(i,{variant:j==="table"?"default":"ghost",size:"icon",onClick:()=>V("table"),title:"Table View","aria-label":"Switch to table view","aria-pressed":j==="table",children:_?e.jsx(_,{size:16}):null}),e.jsx(i,{variant:j==="grid"?"default":"ghost",size:"icon",onClick:()=>V("grid"),title:"Grid View","aria-label":"Switch to grid view","aria-pressed":j==="grid",children:$?e.jsx($,{size:16}):null})]})]}),M.length===0?e.jsx(A,{className:"border-dashed",children:e.jsx(D,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:l?p?e.jsx(p,{size:64}):null:C?e.jsx(C,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:l?"No articles found":"No articles yet"}),e.jsx("p",{className:"text-muted-foreground",children:l?"Try a different search term":"Create your first news article to get started"})]}),!l&&e.jsx(i,{asChild:!0,children:e.jsxs("a",{href:"/admin/news/new","data-astro-prefetch":!0,children:[g?e.jsx(g,{size:18,className:"mr-2"}):null,"Create Article"]})})]})})}):j==="table"?e.jsx(A,{children:e.jsxs(he,{children:[e.jsx(ue,{children:e.jsxs(W,{children:[e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[U?e.jsx(U,{size:16}):null,"Article"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[m?e.jsx(m,{size:16}):null,"Category"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(d,{size:16}):null,"Author"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx(o,{size:16}):null,"Status"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[x?e.jsx(x,{size:16}):null,"Published"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[I?e.jsx(I,{size:16}):null,"Comments"]})}),e.jsx(n,{children:"Actions"})]})}),e.jsx(je,{children:M.map(s=>e.jsxs(W,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.image&&y?e.jsx(y,{size:14,className:"text-muted-foreground flex-shrink-0"}):null,e.jsx("strong",{className:"font-semibold text-foreground",children:s.title})]}),e.jsxs("span",{className:"text-xs text-muted-foreground font-mono flex items-center gap-1",children:[q?e.jsx(q,{size:12}):null,"/",s.slug]})]})}),e.jsx(c,{children:e.jsxs(h,{style:{backgroundColor:R(E[s.category]),color:"white"},className:"text-xs uppercase",children:[m?e.jsx(m,{size:12,className:"mr-1"}):null,E[s.category]]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d?e.jsx(d,{size:16}):null,e.jsx("span",{children:s.author.name})]})}),e.jsx(c,{children:s.published?e.jsxs(h,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[o?e.jsx(o,{size:14,className:"mr-1"}):null,"Published"]}):e.jsxs(h,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[b?e.jsx(b,{size:14,className:"mr-1"}):null,"Draft"]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[x?e.jsx(x,{size:14}):null,e.jsx("span",{children:F(s.publishedAt)})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[I?e.jsx(I,{size:14}):null,e.jsx("span",{children:le[s.id]??0})]})}),e.jsx(c,{children:e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"h-9 w-9",children:z?e.jsx(z,{size:18}):null})}),e.jsxs(Z,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/news/view/${s.id}`,"data-astro-prefetch":!0,children:[v?e.jsx(v,{size:16,className:"mr-2"}):null,"View"]})}),e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/news/${s.id}`,"data-astro-prefetch":!0,children:[N?e.jsx(N,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsxs(u,{onClick:()=>G(s.id),className:"text-destructive focus:text-destructive",children:[w?e.jsx(w,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]},s.id))})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(s=>e.jsxs(A,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.image&&e.jsx("div",{className:"w-full h-48 overflow-hidden bg-muted",children:e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs(h,{style:{backgroundColor:R(E[s.category]),color:"white"},className:"text-xs uppercase",children:[m?e.jsx(m,{size:12,className:"mr-1"}):null,E[s.category]]}),s.published?e.jsxs(h,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[o?e.jsx(o,{size:14,className:"mr-1"}):null,"Published"]}):e.jsxs(h,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[b?e.jsx(b,{size:14,className:"mr-1"}):null,"Draft"]})]}),e.jsxs("h3",{className:"text-lg font-semibold mb-2 text-foreground flex items-center gap-2",children:[s.image&&y?e.jsx(y,{size:16,className:"text-muted-foreground"}):null,s.title]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:s.excerpt||s.content.substring(0,100)+"..."}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[d?e.jsx(d,{size:14}):null,s.author.name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[x?e.jsx(x,{size:14}):null,F(s.publishedAt)]})]}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8",children:z?e.jsx(z,{size:16}):null})}),e.jsxs(Z,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/news/view/${s.id}`,"data-astro-prefetch":!0,children:[v?e.jsx(v,{size:16,className:"mr-2"}):null,"View"]})}),e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/news/${s.id}`,"data-astro-prefetch":!0,children:[N?e.jsx(N,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsxs(u,{onClick:()=>G(s.id),className:"text-destructive focus:text-destructive",children:[w?e.jsx(w,{size:16,className:"mr-2"}):null,"Delete"]})]})]})]})]})]},s.id))})]})}export{Ve as default};
