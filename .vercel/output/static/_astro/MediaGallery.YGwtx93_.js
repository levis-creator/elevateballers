const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as q}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Z6aMusZW.js";import{B as r}from"./button.BWaXVklz.js";import{I as J}from"./input.DYfGnR1o.js";import{C as N,d as C}from"./card.YuvTJRVG.js";import{S as K}from"./skeleton.B3vSOSjr.js";import{B as o}from"./badge.DPtWg24B.js";import{T as Q,a as W,b as R,c as h,d as X,e as x}from"./dropdown-menu.C-53F5K0.js";import{c as b}from"./utils.CDN07tui.js";import"./index.CTkzGMNT.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.UCZQMOc2.js";import"./index.B8x0sxYY.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function je(){const[B,O]=n.useState([]),[$,z]=n.useState(!0),[E,m]=n.useState(""),[t,u]=n.useState("all"),[d,U]=n.useState(""),[c,M]=n.useState("grid"),[a,H]=n.useState({});n.useEffect(()=>{q(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{H({Plus:s.Plus,Search:s.Search,List:s.List,Grid:s.Grid,Edit:s.Edit,Trash2:s.Trash2,Images:s.Images,Image:s.Image,Video:s.Video,Music:s.Music,AlertCircle:s.AlertCircle,ExternalLink:s.ExternalLink,RefreshCw:s.RefreshCw})})},[]),n.useEffect(()=>{w()},[t]);const w=async()=>{try{z(!0);const s=t==="all"?void 0:t.toUpperCase(),l=await fetch(`/api/media${s?`?type=${s}`:""}`);if(!l.ok)throw new Error("Failed to fetch media");const i=await l.json();O(i)}catch(s){m(s.message||"Failed to load media")}finally{z(!1)}},T=async s=>{if(window.confirm(`Are you sure you want to delete this media item?

This action cannot be undone.`))try{if(!(await fetch(`/api/media/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete media");m(""),w()}catch(i){m("Error deleting media: "+i.message),setTimeout(()=>m(""),5e3)}},f=s=>({IMAGE:"bg-primary",VIDEO:"bg-red-500",AUDIO:"bg-green-500"})[s]||"bg-slate-500",k=s=>s==="IMAGE"?a.Image:s==="VIDEO"?a.Video:s==="AUDIO"?a.Music:null,y=B.filter(s=>s.title.toLowerCase().includes(d.toLowerCase())||s.tags&&s.tags.some(l=>l.toLowerCase().includes(d.toLowerCase()))),g=a.Plus,A=a.Search,S=a.List,L=a.Grid,j=a.Edit,p=a.Trash2,V=a.Images,G=a.Image,_=a.Video,D=a.Music,v=a.ExternalLink,F=a.AlertCircle,P=a.RefreshCw;return $?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(K,{className:"h-16 w-full"},s))}):E?e.jsx(N,{className:"border-destructive",children:e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[F?e.jsx(F,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Media"}),e.jsx("p",{className:"text-muted-foreground",children:E})]}),e.jsxs(r,{onClick:w,variant:"default",children:[P?e.jsx(P,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground",children:"Media Gallery"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage images, videos, and audio files"})]}),e.jsx(r,{asChild:!0,children:e.jsxs("a",{href:"/admin/media/new","data-astro-prefetch":!0,children:[g?e.jsx(g,{size:18,className:"mr-2"}):null,"Add Media"]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"media-search",className:"sr-only",children:"Search media"}),A?e.jsx(A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(J,{id:"media-search",type:"text",placeholder:"Search media...",value:d,onChange:s=>U(s.target.value),className:"pl-10","aria-label":"Search media by title or tags"})]}),e.jsxs("div",{className:"flex gap-2 bg-background p-1 rounded-lg border",children:[e.jsx(r,{variant:t==="all"?"default":"ghost",size:"sm",onClick:()=>u("all"),"aria-label":"Show all media","aria-pressed":t==="all",children:"All"}),e.jsxs(r,{variant:t==="image"?"default":"ghost",size:"sm",onClick:()=>u("image"),"aria-label":"Filter images","aria-pressed":t==="image",children:[G?e.jsx(G,{size:16,className:"mr-2"}):null,"Images"]}),e.jsxs(r,{variant:t==="video"?"default":"ghost",size:"sm",onClick:()=>u("video"),"aria-label":"Filter videos","aria-pressed":t==="video",children:[_?e.jsx(_,{size:16,className:"mr-2"}):null,"Videos"]}),e.jsxs(r,{variant:t==="audio"?"default":"ghost",size:"sm",onClick:()=>u("audio"),"aria-label":"Filter audio","aria-pressed":t==="audio",children:[D?e.jsx(D,{size:16,className:"mr-2"}):null,"Audio"]})]}),e.jsxs("div",{className:"flex gap-2 bg-background p-1 rounded-lg border",children:[e.jsx(r,{variant:c==="grid"?"default":"ghost",size:"icon",onClick:()=>M("grid"),title:"Grid View","aria-label":"Switch to grid view","aria-pressed":c==="grid",children:L?e.jsx(L,{size:16}):null}),e.jsx(r,{variant:c==="list"?"default":"ghost",size:"icon",onClick:()=>M("list"),title:"List View","aria-label":"Switch to list view","aria-pressed":c==="list",children:S?e.jsx(S,{size:16}):null})]})]}),y.length===0?e.jsx(N,{className:"border-dashed",children:e.jsx(C,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:V?e.jsx(V,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:d||t!=="all"?"No media found":"No media yet"}),e.jsx("p",{className:"text-muted-foreground",children:d||t!=="all"?"Try adjusting your search or filters":"Add your first media item to get started"})]}),!d&&t==="all"&&e.jsx(r,{asChild:!0,children:e.jsxs("a",{href:"/admin/media/new","data-astro-prefetch":!0,children:[g?e.jsx(g,{size:18,className:"mr-2"}):null,"Add Media"]})})]})})}):c==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map(s=>{const l=k(s.type);return e.jsxs(N,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative w-full h-48 bg-muted overflow-hidden",children:[s.type==="IMAGE"?e.jsx("img",{src:s.url,alt:s.title,className:"w-full h-full object-cover",onError:i=>{i.target.style.display="none"}}):e.jsx("div",{className:b("w-full h-full flex items-center justify-center",f(s.type),"bg-opacity-20"),children:l?e.jsx(l,{size:48,className:"text-primary"}):null}),e.jsxs(o,{variant:"outline",className:b("absolute top-2 right-2 text-white border-0 flex items-center gap-1.5 uppercase text-xs font-semibold",f(s.type)),children:[l?e.jsx(l,{size:14}):null,s.type]}),s.thumbnail&&s.type!=="IMAGE"&&e.jsx("img",{src:s.thumbnail,alt:s.title,className:"absolute inset-0 w-full h-full object-cover opacity-30"})]}),e.jsxs(C,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2 text-foreground line-clamp-2",children:s.title}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.tags.slice(0,3).map((i,I)=>e.jsx(o,{variant:"secondary",className:"text-xs",children:i},I)),s.tags.length>3&&e.jsxs(o,{variant:"outline",className:"text-xs",children:["+",s.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t",children:[e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8",asChild:!0,children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",title:"View",children:v?e.jsx(v,{size:16}):null})}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8",asChild:!0,children:e.jsx("a",{href:`/admin/media/${s.id}`,"data-astro-prefetch":!0,title:"Edit",children:j?e.jsx(j,{size:16}):null})}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>T(s.id),title:"Delete",children:p?e.jsx(p,{size:16}):null})]})]})]},s.id)})}):e.jsx(N,{children:e.jsxs(Q,{children:[e.jsx(W,{children:e.jsxs(R,{children:[e.jsx(h,{children:"Preview"}),e.jsx(h,{children:"Title"}),e.jsx(h,{children:"Type"}),e.jsx(h,{children:"Tags"}),e.jsx(h,{children:"Actions"})]})}),e.jsx(X,{children:y.map(s=>{const l=k(s.type);return e.jsxs(R,{children:[e.jsx(x,{children:e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-muted",children:s.type==="IMAGE"?e.jsx("img",{src:s.url,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:b("w-full h-full flex items-center justify-center",f(s.type),"bg-opacity-20"),children:l?e.jsx(l,{size:24,className:"text-primary"}):null})})}),e.jsx(x,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("strong",{className:"font-semibold text-foreground",children:s.title}),e.jsx("small",{className:"text-xs text-muted-foreground font-mono",children:s.url})]})}),e.jsx(x,{children:e.jsxs(o,{variant:"outline",className:b("text-white border-0 flex items-center gap-1.5 uppercase text-xs font-semibold w-fit",f(s.type)),children:[l?e.jsx(l,{size:14}):null,s.type]})}),e.jsx(x,{children:s.tags&&s.tags.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.slice(0,3).map((i,I)=>e.jsx(o,{variant:"secondary",className:"text-xs",children:i},I))}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"ghost",size:"icon",className:"h-9 w-9",asChild:!0,children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",title:"View media",children:v?e.jsx(v,{size:16}):null})}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-9 w-9",asChild:!0,children:e.jsx("a",{href:`/admin/media/${s.id}`,"data-astro-prefetch":!0,title:"Edit media",children:j?e.jsx(j,{size:16}):null})}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-9 w-9 text-destructive hover:text-destructive",onClick:()=>T(s.id),title:"Delete media",children:p?e.jsx(p,{size:16}):null})]})})]},s.id)})})]})})]})}export{je as default};
