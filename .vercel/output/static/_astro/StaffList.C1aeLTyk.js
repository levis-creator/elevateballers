const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as q}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.Z6aMusZW.js";import{B as i}from"./button.BWaXVklz.js";import{I as J}from"./input.DYfGnR1o.js";import{C as v,a as T}from"./card.CoMIDSCG.js";import{S as K}from"./skeleton.B3vSOSjr.js";import{B as H}from"./badge.DPtWg24B.js";import{T as Q,a as W,b as _,c as d,d as X,e as h,D as k,f as D,g as O,h as w}from"./dropdown-menu.CVPMSsLz.js";import{c as B}from"./utils.CDN07tui.js";import"./index.lnW5t9aA.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.LMohFq6j.js";import"./index.DUJzU2eK.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function pe(){const[G,V]=l.useState([]),[F,A]=l.useState(!0),[E,f]=l.useState(""),[t,U]=l.useState(""),[o,y]=l.useState("table"),[a,Y]=l.useState({});l.useEffect(()=>{q(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{Y({Plus:s.Plus,Search:s.Search,List:s.List,Grid:s.Grid,Edit:s.Edit,Trash2:s.Trash2,Briefcase:s.Briefcase,AlertCircle:s.AlertCircle,RefreshCw:s.RefreshCw,MoreVertical:s.MoreVertical,User:s.User,Mail:s.Mail,Phone:s.Phone})})},[]),l.useEffect(()=>{C()},[]);const C=async()=>{try{A(!0);const s=await fetch("/api/staff");if(!s.ok)throw new Error("Failed to fetch staff");const r=await s.json();V(r)}catch(s){f(s.message||"Failed to load staff")}finally{A(!1)}},b=async s=>{if(window.confirm(`Are you sure you want to delete this staff member?

This action cannot be undone. Team assignments will be removed.`))try{if(!(await fetch(`/api/staff/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete staff");f(""),C()}catch($){f("Error deleting staff: "+$.message),setTimeout(()=>f(""),5e3)}},z=s=>({COACH:"bg-primary",ASSISTANT_COACH:"bg-blue-500",MANAGER:"bg-red-500",ASSISTANT_MANAGER:"bg-green-500",PHYSIOTHERAPIST:"bg-pink-500",TRAINER:"bg-yellow-500",ANALYST:"bg-cyan-500",OTHER:"bg-slate-500"})[s]||"bg-slate-500",I=s=>({COACH:"Coach",ASSISTANT_COACH:"Assistant Coach",MANAGER:"Manager",ASSISTANT_MANAGER:"Assistant Manager",PHYSIOTHERAPIST:"Physiotherapist",TRAINER:"Trainer",ANALYST:"Analyst",OTHER:"Other"})[s]||s,S=G.filter(s=>`${s.firstName} ${s.lastName}`.toLowerCase().includes(t.toLowerCase())||s.email&&s.email.toLowerCase().includes(t.toLowerCase())||s.phone&&s.phone.toLowerCase().includes(t.toLowerCase())||s.role.toLowerCase().includes(t.toLowerCase())),x=a.Plus,u=a.Search,M=a.List,R=a.Grid,m=a.Edit,j=a.Trash2,n=a.Briefcase,L=a.AlertCircle,P=a.RefreshCw,g=a.MoreVertical,c=a.User,p=a.Mail,N=a.Phone;return F?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(K,{className:"h-16 w-full"},s))}):E?e.jsx(v,{className:"border-destructive",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[L?e.jsx(L,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Staff"}),e.jsx("p",{className:"text-muted-foreground",children:E})]}),e.jsxs(i,{onClick:C,variant:"default",children:[P?e.jsx(P,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[n?e.jsx(n,{size:28}):null,"Staff Members"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage coaches, managers, and team staff"})]}),e.jsx(i,{asChild:!0,children:e.jsxs("a",{href:"/admin/staff/new","data-astro-prefetch":!0,children:[x?e.jsx(x,{size:18,className:"mr-2"}):null,"Create Staff"]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"staff-search",className:"sr-only",children:"Search staff"}),u?e.jsx(u,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(J,{id:"staff-search",type:"text",placeholder:"Search staff...",value:t,onChange:s=>U(s.target.value),className:"pl-10","aria-label":"Search staff by name, email, phone, or role"})]}),e.jsxs("div",{className:"flex gap-2 bg-background p-1 rounded-lg border",children:[e.jsx(i,{variant:o==="table"?"default":"ghost",size:"icon",onClick:()=>y("table"),title:"Table View","aria-label":"Switch to table view","aria-pressed":o==="table",children:M?e.jsx(M,{size:16}):null}),e.jsx(i,{variant:o==="grid"?"default":"ghost",size:"icon",onClick:()=>y("grid"),title:"Grid View","aria-label":"Switch to grid view","aria-pressed":o==="grid",children:R?e.jsx(R,{size:16}):null})]})]}),S.length===0?e.jsx(v,{className:"border-dashed",children:e.jsx(T,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:t?u?e.jsx(u,{size:64}):null:n?e.jsx(n,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t?"No staff found":"No staff yet"}),e.jsx("p",{className:"text-muted-foreground",children:t?"Try a different search term":"Create your first staff member to get started"})]}),!t&&e.jsx(i,{asChild:!0,children:e.jsxs("a",{href:"/admin/staff/new","data-astro-prefetch":!0,children:[x?e.jsx(x,{size:18,className:"mr-2"}):null,"Create Staff"]})})]})})}):o==="table"?e.jsx(v,{children:e.jsxs(Q,{children:[e.jsx(W,{children:e.jsxs(_,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[c?e.jsx(c,{size:16}):null,"Name"]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[n?e.jsx(n,{size:16}):null,"Role"]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[p?e.jsx(p,{size:16}):null,"Email"]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[N?e.jsx(N,{size:16}):null,"Phone"]})}),e.jsx(d,{children:"Actions"})]})}),e.jsx(X,{children:S.map(s=>e.jsxs(_,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.image?e.jsx("img",{src:s.image,alt:`${s.firstName} ${s.lastName}`,className:"w-10 h-10 rounded-full object-cover",onError:r=>{r.target.src="/images/placeholder-staff.jpg"}}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:c?e.jsx(c,{size:20,className:"text-muted-foreground"}):null}),e.jsxs("strong",{className:"font-semibold text-foreground",children:[s.firstName," ",s.lastName]})]})}),e.jsx(h,{children:e.jsx(H,{variant:"outline",className:B("text-white border-0",z(s.role)),children:I(s.role)})}),e.jsx(h,{children:s.email?e.jsx("a",{href:`mailto:${s.email}`,className:"text-primary hover:underline",children:s.email}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(h,{children:s.phone?e.jsx("a",{href:`tel:${s.phone}`,className:"text-primary hover:underline",children:s.phone}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(h,{children:e.jsxs(k,{children:[e.jsx(D,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"h-9 w-9",children:g?e.jsx(g,{size:18}):null})}),e.jsxs(O,{align:"end",children:[e.jsx(w,{asChild:!0,children:e.jsxs("a",{href:`/admin/staff/${s.id}`,"data-astro-prefetch":!0,children:[m?e.jsx(m,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsxs(w,{onClick:()=>b(s.id),className:"text-destructive focus:text-destructive",children:[j?e.jsx(j,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]},s.id))})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(s=>e.jsxs(v,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative w-full h-64 bg-muted overflow-hidden",children:s.image?e.jsx("img",{src:s.image,alt:`${s.firstName} ${s.lastName}`,className:"w-full h-full object-cover",onError:r=>{r.target.src="/images/placeholder-staff.jpg"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:c?e.jsx(c,{size:64,className:"text-muted-foreground"}):null})}),e.jsxs(T,{className:"p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:[s.firstName," ",s.lastName]}),e.jsx(H,{variant:"outline",className:B("mb-4 text-white border-0",z(s.role)),children:I(s.role)}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[p?e.jsx(p,{size:16}):null,e.jsx("a",{href:`mailto:${s.email}`,className:"hover:underline",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[N?e.jsx(N,{size:16}):null,e.jsx("a",{href:`tel:${s.phone}`,className:"hover:underline",children:s.phone})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(k,{children:[e.jsx(D,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8",children:g?e.jsx(g,{size:16}):null})}),e.jsxs(O,{align:"end",children:[e.jsx(w,{asChild:!0,children:e.jsxs("a",{href:`/admin/staff/${s.id}`,"data-astro-prefetch":!0,children:[m?e.jsx(m,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsxs(w,{onClick:()=>b(s.id),className:"text-destructive focus:text-destructive",children:[j?e.jsx(j,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]})]},s.id))})]})}export{pe as default};
