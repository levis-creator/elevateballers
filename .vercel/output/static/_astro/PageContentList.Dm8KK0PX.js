const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as F}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.Z6aMusZW.js";import{B as o}from"./button.BWaXVklz.js";import{I as R}from"./input.DYfGnR1o.js";import{C as h,a as k}from"./card.CoMIDSCG.js";import{S as V}from"./skeleton.B3vSOSjr.js";import{B as I}from"./badge.DPtWg24B.js";import{T as B,a as $,b as P,c as l,d as H,e as n,D as U,f as O,g as q,h as x}from"./dropdown-menu.CVPMSsLz.js";import"./utils.CDN07tui.js";import"./index.lnW5t9aA.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.LMohFq6j.js";import"./index.DUJzU2eK.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function he(){const[L,z]=r.useState([]),[D,m]=r.useState(!0),[u,i]=r.useState(""),[a,A]=r.useState(""),[t,M]=r.useState({});r.useEffect(()=>{F(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{M({Plus:s.Plus,Search:s.Search,Edit:s.Edit,Trash2:s.Trash2,FileText:s.FileText,AlertCircle:s.AlertCircle,CheckCircle:s.CheckCircle,Clock:s.Clock,ExternalLink:s.ExternalLink,RefreshCw:s.RefreshCw,MoreVertical:s.MoreVertical})})},[]),r.useEffect(()=>{d()},[]);const d=async()=>{try{m(!0);const s=await fetch("/api/pages?admin=true");if(!s.ok)throw new Error("Failed to fetch pages");const y=await s.json();z(y)}catch(s){i(s.message||"Failed to load pages")}finally{m(!1)}},_=async s=>{if(window.confirm(`Are you sure you want to delete this page?

This action cannot be undone.`))try{if(!(await fetch(`/api/pages/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete page");i(""),d()}catch(S){i("Error deleting page: "+S.message),setTimeout(()=>i(""),5e3)}},f=L.filter(s=>s.title.toLowerCase().includes(a.toLowerCase())||s.slug.toLowerCase().includes(a.toLowerCase())),c=t.Plus,p=t.Search,j=t.Edit,g=t.Trash2,C=t.FileText,N=t.CheckCircle,w=t.Clock,b=t.ExternalLink,T=t.AlertCircle,v=t.RefreshCw,E=t.MoreVertical;return D?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(V,{className:"h-16 w-full"},s))}):u?e.jsx(h,{className:"border-destructive",children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[T?e.jsx(T,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Pages"}),e.jsx("p",{className:"text-muted-foreground",children:u})]}),e.jsxs(o,{onClick:d,variant:"default",children:[v?e.jsx(v,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground",children:"Page Content"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage static page content"})]}),e.jsx(o,{asChild:!0,children:e.jsxs("a",{href:"/admin/pages/new","data-astro-prefetch":!0,children:[c?e.jsx(c,{size:18,className:"mr-2"}):null,"Create Page"]})})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"page-search",className:"sr-only",children:"Search pages"}),p?e.jsx(p,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(R,{id:"page-search",type:"text",placeholder:"Search pages...",value:a,onChange:s=>A(s.target.value),className:"pl-10","aria-label":"Search pages by title or slug"})]})}),f.length===0?e.jsx(h,{className:"border-dashed",children:e.jsx(k,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:C?e.jsx(C,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a?"No pages found":"No pages yet"}),e.jsx("p",{className:"text-muted-foreground",children:a?"Try a different search term":"Create your first page to get started"})]}),!a&&e.jsx(o,{asChild:!0,children:e.jsxs("a",{href:"/admin/pages/new","data-astro-prefetch":!0,children:[c?e.jsx(c,{size:18,className:"mr-2"}):null,"Create Page"]})})]})})}):e.jsx(h,{children:e.jsxs(B,{children:[e.jsx($,{children:e.jsxs(P,{children:[e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Slug"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Updated"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(H,{children:f.map(s=>e.jsxs(P,{children:[e.jsx(n,{children:e.jsx("strong",{className:"font-semibold text-foreground",children:s.title})}),e.jsx(n,{children:e.jsxs("span",{className:"text-sm text-muted-foreground font-mono",children:["/",s.slug]})}),e.jsx(n,{children:s.published?e.jsxs(I,{variant:"outline",className:"bg-green-500 text-white border-0 flex items-center gap-1.5 w-fit",children:[N?e.jsx(N,{size:14}):null,"Published"]}):e.jsxs(I,{variant:"outline",className:"bg-slate-500 text-white border-0 flex items-center gap-1.5 w-fit",children:[w?e.jsx(w,{size:14}):null,"Draft"]})}),e.jsx(n,{children:e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),e.jsx(n,{children:e.jsxs(U,{children:[e.jsx(O,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"h-9 w-9",children:E?e.jsx(E,{size:18}):null})}),e.jsxs(q,{align:"end",children:[e.jsx(x,{asChild:!0,children:e.jsxs("a",{href:`/admin/pages/${s.id}`,"data-astro-prefetch":!0,children:[j?e.jsx(j,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsx(x,{asChild:!0,children:e.jsxs("a",{href:`/${s.slug}`,target:"_blank",rel:"noopener noreferrer","data-astro-prefetch":!0,children:[b?e.jsx(b,{size:16,className:"mr-2"}):null,"View on Site"]})}),e.jsxs(x,{onClick:()=>_(s.id),className:"text-destructive focus:text-destructive",children:[g?e.jsx(g,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]},s.id))})]})})]})}export{he as default};
