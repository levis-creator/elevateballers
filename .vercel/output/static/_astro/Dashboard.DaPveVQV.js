const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as q}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.Z6aMusZW.js";import{C as h,a as x,b as y,c as N,d as b}from"./card.CoMIDSCG.js";import{S as o}from"./skeleton.B3vSOSjr.js";import{c as v}from"./utils.CDN07tui.js";function re(){const[l,w]=d.useState({newsCount:0,matchesCount:0,playersCount:0,mediaCount:0,pagesCount:0}),[c,i]=d.useState(!0),[C,T]=d.useState(""),[k,E]=d.useState([]),[I,A]=d.useState(!0),[a,S]=d.useState({});d.useEffect(()=>{q(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{S({Newspaper:s.Newspaper,Calendar:s.Calendar,Users:s.Users,Images:s.Images,FileText:s.FileText,Plus:s.Plus,FolderOpen:s.FolderOpen,Bolt:s.Bolt,ChevronRight:s.ChevronRight,AlertCircle:s.AlertCircle,Bell:s.Bell,UserPlus:s.UserPlus,Link:s.Link})})},[]),d.useEffect(()=>{U(),u()},[]);const u=async()=>{try{A(!0);const s=await fetch("/api/notifications?unread=true&limit=10");if(s.ok){const t=await s.json();E(t)}}catch(s){console.error("Error fetching notifications:",s)}finally{A(!1)}},m=async s=>{try{(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,read:!0})})).ok&&E(r=>r.map(n=>n.id===s?{...n,read:!0}:n))}catch(t){console.error("Error marking notification as read:",t)}},M=async(s,t)=>{try{const r=await fetch(`/api/teams/${s}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!0})});if(r.ok)await m(t),u();else{const n=await r.json();alert("Error approving team: "+(n.error||"Unknown error"))}}catch(r){console.error("Error approving team:",r),alert("Error approving team: "+r.message)}},D=async(s,t)=>{try{const r=await fetch(`/api/teams/${s}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!1})});if(r.ok)await m(t),u();else{const n=await r.json();alert("Error rejecting team: "+(n.error||"Unknown error"))}}catch(r){console.error("Error rejecting team:",r),alert("Error rejecting team: "+r.message)}},_=async(s,t)=>{try{const r=await fetch(`/api/players/${s}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!0})});if(r.ok)await m(t),u();else{const n=await r.json();alert("Error approving player: "+(n.error||"Unknown error"))}}catch(r){console.error("Error approving player:",r),alert("Error approving player: "+r.message)}},F=async(s,t)=>{try{const r=await fetch(`/api/players/${s}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!1})});if(r.ok)await m(t),u();else{const n=await r.json();alert("Error rejecting player: "+(n.error||"Unknown error"))}}catch(r){console.error("Error rejecting player:",r),alert("Error rejecting player: "+r.message)}},U=async()=>{try{i(!0);const[s,t,r,n,g]=await Promise.all([fetch("/api/news?admin=true"),fetch("/api/matches"),fetch("/api/players"),fetch("/api/media"),fetch("/api/pages?admin=true")]),[f,j,J,V,Y]=await Promise.all([s.json(),t.json(),r.json(),n.json(),g.json()]);w({newsCount:f.length||0,matchesCount:j.length||0,playersCount:J.length||0,mediaCount:V.length||0,pagesCount:Y.length||0})}catch(s){T(s.message||"Failed to load statistics")}finally{i(!1)}};if(c)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-in fade-in duration-300",children:[1,2,3,4].map(s=>e.jsx(h,{className:"overflow-hidden",children:e.jsxs(x,{className:"p-6",children:[e.jsx(o,{className:"h-14 w-14 rounded-xl mb-4"}),e.jsx(o,{className:"h-8 w-20 mb-2"}),e.jsx(o,{className:"h-4 w-32"})]})},s))});if(C){const s=a.AlertCircle;return e.jsx(h,{className:"border-destructive",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[s?e.jsx(s,{size:20}):null,e.jsx("span",{children:C})]})})})}const $=[{title:"News Articles",count:l.newsCount,icon:a.Newspaper,link:"/admin/news",color:"#667eea"},{title:"Matches",count:l.matchesCount,icon:a.Calendar,link:"/admin/matches",color:"#f5576c"},{title:"Players",count:l.playersCount,icon:a.Users,link:"/admin/players",color:"#4facfe"},{title:"Media Items",count:l.mediaCount,icon:a.Images,link:"/admin/media",color:"#fa709a"}],z=[{icon:a.Plus,label:"Create News Article",link:"/admin/news/new",color:"#667eea"},{icon:a.Plus,label:"Create Match",link:"/admin/matches/new",color:"#f5576c"},{icon:a.Plus,label:"Add Player",link:"/admin/players/new",color:"#4facfe"},{icon:a.Plus,label:"Add Media",link:"/admin/media/new",color:"#fa709a"},{icon:a.Plus,label:"Create Page",link:"/admin/pages/new",color:"#10b981"}],p=a.ChevronRight,R=a.Bolt,P=a.FolderOpen,L=a.Newspaper,O=a.Calendar,B=a.Users,H=a.Images,G=a.FileText;return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's an overview of your content."})]}),e.jsxs("div",{className:"sr-only",children:[e.jsx("h2",{children:"Content Statistics"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["News Articles: ",l.newsCount]}),e.jsxs("li",{children:["Matches: ",l.matchesCount]}),e.jsxs("li",{children:["Players: ",l.playersCount]}),e.jsxs("li",{children:["Media Items: ",l.mediaCount]}),e.jsxs("li",{children:["Pages: ",l.pagesCount]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:$.map(s=>{const t=s.icon;return e.jsx("a",{href:s.link,className:"block no-underline","data-astro-prefetch":!0,children:e.jsxs(h,{className:"relative overflow-hidden border transition-all hover:shadow-lg hover:-translate-y-1 group",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 opacity-0 group-hover:opacity-100 transition-opacity",style:{backgroundColor:s.color}}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-muted flex items-center justify-center flex-shrink-0",style:{color:s.color},children:t?e.jsx(t,{size:24}):e.jsx(o,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-3xl font-bold text-foreground mb-1 leading-none",children:s.count}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:s.title})]}),e.jsx("div",{className:"text-muted-foreground group-hover:text-foreground transition-colors",children:p?e.jsx(p,{size:18,className:"group-hover:translate-x-1 transition-transform"}):e.jsx(o,{className:"w-4 h-4"})})]})})]})},s.title)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(h,{children:[e.jsxs(y,{className:"pb-4 border-b",children:[e.jsxs(N,{className:"flex items-center gap-2 text-xl",children:[R?e.jsx(R,{size:20}):null,"Quick Actions"]}),e.jsx(b,{children:"Create new content quickly"})]}),e.jsx(x,{className:"pt-6",children:e.jsx("div",{className:"space-y-3",children:z.map(s=>{const t=s.icon;return e.jsxs("a",{href:s.link,className:v("flex items-center gap-4 p-4 rounded-lg","border border-border bg-background","transition-all hover:bg-accent hover:border-accent-foreground/20","hover:translate-x-1 no-underline text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),"data-astro-prefetch":!0,children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{color:s.color},children:t?e.jsx(t,{size:20}):e.jsx(o,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 font-medium",children:s.label}),p?e.jsx(p,{size:16,className:"text-muted-foreground"}):e.jsx(o,{className:"w-4 h-4"})]},s.label)})})})]}),e.jsxs(h,{children:[e.jsxs(y,{className:"pb-4 border-b",children:[e.jsxs(N,{className:"flex items-center gap-2 text-xl",children:[P?e.jsx(P,{size:20}):null,"Content Management"]}),e.jsx(b,{children:"Manage all your content"})]}),e.jsx(x,{className:"pt-6",children:e.jsx("div",{className:"space-y-3",children:[{icon:L,title:"News Articles",description:"Manage news and blog posts",link:"/admin/news",color:"#667eea"},{icon:O,title:"Matches",description:"Manage fixtures and results",link:"/admin/matches",color:"#f5576c"},{icon:B,title:"Players",description:"Manage player profiles",link:"/admin/players",color:"#4facfe"},{icon:H,title:"Media",description:"Manage images, videos, and audio",link:"/admin/media",color:"#fa709a"},{icon:G,title:"Pages",description:"Manage static page content",link:"/admin/pages",color:"#10b981"}].map(s=>{const t=s.icon;return e.jsxs("a",{href:s.link,className:v("flex items-center gap-4 p-5 rounded-lg","border border-border bg-background","transition-all hover:bg-accent hover:border-accent-foreground/20","hover:translate-x-1 no-underline text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),"data-astro-prefetch":!0,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 text-white",style:{backgroundColor:s.color},children:t?e.jsx(t,{size:20}):e.jsx(o,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),p?e.jsx(p,{size:16,className:"text-muted-foreground flex-shrink-0"}):e.jsx(o,{className:"w-4 h-4"})]},s.title)})})})]})]}),e.jsxs(h,{children:[e.jsxs(y,{className:"pb-4 border-b",children:[e.jsxs(N,{className:"flex items-center gap-2 text-xl",children:[a.Bell?e.jsx(a.Bell,{size:20}):null,"Recent Registrations"]}),e.jsx(b,{children:"New team and player registrations"})]}),e.jsx(x,{className:"pt-6",children:I?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border border-border",children:[e.jsx(o,{className:"w-10 h-10 rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{className:"h-4 w-3/4 mb-2"}),e.jsx(o,{className:"h-3 w-1/2"})]})]},s))}):k.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No new registrations"})}):e.jsx("div",{className:"space-y-3",children:k.map(s=>{const t=()=>s.type==="TEAM_REGISTERED"?a.Users||null:s.type==="PLAYER_REGISTERED"?a.UserPlus||null:a.Link||null,r=()=>s.type==="TEAM_REGISTERED"?"#667eea":s.type==="PLAYER_REGISTERED"?"#4facfe":"#10b981",n=t(),g=r(),f=new Date(s.createdAt),j=Q(f);return e.jsxs("div",{className:v("flex items-start gap-4 p-4 rounded-lg border transition-all",s.read?"border-border bg-background opacity-60":"border-primary/20 bg-primary/5"),children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 text-white",style:{backgroundColor:g},children:n?e.jsx(n,{size:20}):null}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:s.message}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e.jsx("span",{children:j}),s.team&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("a",{href:`/admin/teams/view/${s.team.id}`,className:"text-primary hover:underline",onClick:()=>m(s.id),children:"View Team"})]}),s.player&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("a",{href:`/admin/players/edit/${s.player.id}`,className:"text-primary hover:underline",onClick:()=>m(s.id),children:"View Player"})]})]}),!s.read&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.type==="TEAM_REGISTERED"&&s.team&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>M(s.team.id,s.id),className:"px-3 py-1 text-xs font-medium bg-green-500 text-white rounded hover:bg-green-600 transition-colors",title:"Approve team registration",children:"Approve"}),e.jsx("button",{onClick:()=>D(s.team.id,s.id),className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"Reject team registration",children:"Reject"})]}),s.type==="PLAYER_REGISTERED"&&s.player&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(s.player.id,s.id),className:"px-3 py-1 text-xs font-medium bg-green-500 text-white rounded hover:bg-green-600 transition-colors",title:"Approve player registration",children:"Approve"}),e.jsx("button",{onClick:()=>F(s.player.id,s.id),className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"Reject player registration",children:"Reject"})]}),e.jsx("button",{onClick:()=>m(s.id),className:"px-3 py-1 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",title:"Dismiss notification",children:"Dismiss"})]})]})]},s.id)})})})]})]})}function Q(l){const c=Math.floor((new Date().getTime()-l.getTime())/1e3);if(c<60)return"Just now";if(c<3600){const i=Math.floor(c/60);return`${i} minute${i!==1?"s":""} ago`}else if(c<86400){const i=Math.floor(c/3600);return`${i} hour${i!==1?"s":""} ago`}else{const i=Math.floor(c/86400);return`${i} day${i!==1?"s":""} ago`}}export{re as default};
