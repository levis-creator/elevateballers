const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as R}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.Z6aMusZW.js";import{B as x}from"./button.BWaXVklz.js";import{I as P}from"./input.DYfGnR1o.js";import{C as f,a as E}from"./card.CoMIDSCG.js";import{S as B}from"./skeleton.B3vSOSjr.js";import{B as L}from"./badge.DPtWg24B.js";import{T as V,a as F,b as S,c as i,d as X,e as n,D as H,f as $,g as O,h as z}from"./dropdown-menu.CVPMSsLz.js";import"./utils.CDN07tui.js";import"./index.lnW5t9aA.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.LMohFq6j.js";import"./index.DUJzU2eK.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function de(){const[I,M]=a.useState([]),[_,j]=a.useState(!0),[p,c]=a.useState(""),[t,k]=a.useState(""),[r,A]=a.useState({});a.useEffect(()=>{R(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{A({Plus:s.Plus,Search:s.Search,Edit:s.Edit,Trash2:s.Trash2,Trophy:s.Trophy,AlertCircle:s.AlertCircle,RefreshCw:s.RefreshCw,MoreVertical:s.MoreVertical,CheckCircle:s.CheckCircle,XCircle:s.XCircle})})},[]),a.useEffect(()=>{u()},[]);const u=async()=>{try{j(!0);const s=await fetch("/api/leagues");if(!s.ok)throw new Error("Failed to fetch leagues");const m=await s.json();M(m)}catch(s){c(s.message||"Failed to load leagues")}finally{j(!1)}},D=async s=>{if(window.confirm(`Are you sure you want to delete this league?

This action cannot be undone. Matches associated with this league will have their league reference removed.`))try{if(!(await fetch(`/api/leagues/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete league");c(""),u()}catch(T){c("Error deleting league: "+T.message),setTimeout(()=>c(""),5e3)}},g=I.filter(s=>s.name.toLowerCase().includes(t.toLowerCase())||s.description&&s.description.toLowerCase().includes(t.toLowerCase())),o=r.Plus,d=r.Search,N=r.Edit,C=r.Trash2,l=r.Trophy,w=r.AlertCircle,v=r.RefreshCw,b=r.MoreVertical,h=r.CheckCircle,y=r.XCircle;return _?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(B,{className:"h-16 w-full"},s))}):p?e.jsx(f,{className:"border-destructive",children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[w?e.jsx(w,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Leagues"}),e.jsx("p",{className:"text-muted-foreground",children:p})]}),e.jsxs(x,{onClick:u,variant:"default",children:[v?e.jsx(v,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[l?e.jsx(l,{size:28}):null,"Leagues"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage leagues and tournaments"})]}),e.jsx(x,{asChild:!0,children:e.jsxs("a",{href:"/admin/leagues/new","data-astro-prefetch":!0,children:[o?e.jsx(o,{size:18,className:"mr-2"}):null,"Create League"]})})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"league-search",className:"sr-only",children:"Search leagues"}),d?e.jsx(d,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(P,{id:"league-search",type:"text",placeholder:"Search leagues...",value:t,onChange:s=>k(s.target.value),className:"pl-10","aria-label":"Search leagues by name, description, or season"})]})}),g.length===0?e.jsx(f,{className:"border-dashed",children:e.jsx(E,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:t?d?e.jsx(d,{size:64}):null:l?e.jsx(l,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t?"No leagues found":"No leagues yet"}),e.jsx("p",{className:"text-muted-foreground",children:t?"Try a different search term":"Create your first league to get started"})]}),!t&&e.jsx(x,{asChild:!0,children:e.jsxs("a",{href:"/admin/leagues/new","data-astro-prefetch":!0,children:[o?e.jsx(o,{size:18,className:"mr-2"}):null,"Create League"]})})]})})}):e.jsx(f,{children:e.jsxs(V,{children:[e.jsx(F,{children:e.jsxs(S,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[l?e.jsx(l,{size:16}):null,"League"]})}),e.jsx(i,{children:"Seasons"}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[h?e.jsx(h,{size:16}):null,"Status"]})}),e.jsx(i,{children:"Matches"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(X,{children:g.map(s=>e.jsxs(S,{children:[e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.logo&&e.jsx("img",{src:s.logo,alt:s.name,className:"w-6 h-6 object-contain",onError:m=>{m.target.style.display="none"}}),e.jsx("strong",{className:"font-semibold text-foreground",children:s.name})]}),s.description&&e.jsxs("span",{className:"text-sm text-muted-foreground line-clamp-1",children:[s.description.substring(0,100),s.description.length>100?"...":""]})]})}),e.jsx(n,{children:e.jsx("span",{className:"text-sm",children:s._count.seasons})}),e.jsx(n,{children:s.active?e.jsxs(L,{variant:"outline",className:"bg-green-500 text-white border-0 flex items-center gap-1.5 w-fit",children:[h?e.jsx(h,{size:14}):null,"Active"]}):e.jsxs(L,{variant:"outline",className:"bg-slate-500 text-white border-0 flex items-center gap-1.5 w-fit",children:[y?e.jsx(y,{size:14}):null,"Inactive"]})}),e.jsx(n,{children:e.jsx("span",{className:"text-sm",children:s._count.matches})}),e.jsx(n,{children:e.jsxs(H,{children:[e.jsx($,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"icon",className:"h-9 w-9",children:b?e.jsx(b,{size:18}):null})}),e.jsxs(O,{align:"end",children:[e.jsx(z,{asChild:!0,children:e.jsxs("a",{href:`/admin/leagues/${s.id}`,"data-astro-prefetch":!0,children:[N?e.jsx(N,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsxs(z,{onClick:()=>D(s.id),className:"text-destructive focus:text-destructive",children:[C?e.jsx(C,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]},s.id))})]})})]})}export{de as default};
