const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Z6aMusZW.js";import{B as m}from"./button.BWaXVklz.js";import{I as B}from"./input.DYfGnR1o.js";import{C as u,d as E}from"./card.YuvTJRVG.js";import{S as V}from"./skeleton.B3vSOSjr.js";import{B as z}from"./badge.DPtWg24B.js";import{T as F,a as X,b as I,c as l,d as H,e as i,D as $,f as O,g as U,h as D}from"./dropdown-menu.C-53F5K0.js";import"./utils.CDN07tui.js";import"./index.CTkzGMNT.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.UCZQMOc2.js";import"./index.B8x0sxYY.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function he(){const[L,R]=n.useState([]),[M,f]=n.useState(!0),[j,c]=n.useState(""),[a,k]=n.useState(""),[r,A]=n.useState({});n.useEffect(()=>{P(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{A({Plus:s.Plus,Search:s.Search,Edit:s.Edit,Trash2:s.Trash2,CalendarRange:s.CalendarRange,AlertCircle:s.AlertCircle,RefreshCw:s.RefreshCw,MoreVertical:s.MoreVertical,CheckCircle:s.CheckCircle,XCircle:s.XCircle})})},[]),n.useEffect(()=>{x()},[]);const x=async()=>{try{f(!0);const s=await fetch("/api/seasons");if(!s.ok)throw new Error("Failed to fetch seasons");const y=await s.json();R(y)}catch(s){c(s.message||"Failed to load seasons")}finally{f(!1)}},_=async s=>{if(window.confirm(`Are you sure you want to delete this season?

This action cannot be undone. Leagues and matches associated with this season will have their season reference removed.`))try{if(!(await fetch(`/api/seasons/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete season");c(""),x()}catch(T){c("Error deleting season: "+T.message),setTimeout(()=>c(""),5e3)}},p=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set",g=L.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.description&&s.description.toLowerCase().includes(a.toLowerCase())),o=r.Plus,d=r.Search,N=r.Edit,C=r.Trash2,t=r.CalendarRange,w=r.AlertCircle,v=r.RefreshCw,b=r.MoreVertical,h=r.CheckCircle,S=r.XCircle;return M?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(V,{className:"h-16 w-full"},s))}):j?e.jsx(u,{className:"border-destructive",children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[w?e.jsx(w,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Seasons"}),e.jsx("p",{className:"text-muted-foreground",children:j})]}),e.jsxs(m,{onClick:x,variant:"default",children:[v?e.jsx(v,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[t?e.jsx(t,{size:28}):null,"Seasons"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage seasons and tournaments"})]}),e.jsx(m,{asChild:!0,children:e.jsxs("a",{href:"/admin/seasons/new","data-astro-prefetch":!0,children:[o?e.jsx(o,{size:18,className:"mr-2"}):null,"Create Season"]})})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"season-search",className:"sr-only",children:"Search seasons"}),d?e.jsx(d,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(B,{id:"season-search",type:"text",placeholder:"Search seasons...",value:a,onChange:s=>k(s.target.value),className:"pl-10","aria-label":"Search seasons by name or description"})]})}),g.length===0?e.jsx(u,{className:"border-dashed",children:e.jsx(E,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:a?d?e.jsx(d,{size:64}):null:t?e.jsx(t,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a?"No seasons found":"No seasons yet"}),e.jsx("p",{className:"text-muted-foreground",children:a?"Try a different search term":"Create your first season to get started"})]}),!a&&e.jsx(m,{asChild:!0,children:e.jsxs("a",{href:"/admin/seasons/new","data-astro-prefetch":!0,children:[o?e.jsx(o,{size:18,className:"mr-2"}):null,"Create Season"]})})]})})}):e.jsx(u,{children:e.jsxs(F,{children:[e.jsx(X,{children:e.jsxs(I,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(t,{size:16}):null,"Season"]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(t,{size:16}):null,"Period"]})}),e.jsx(l,{children:"League"}),e.jsx(l,{children:"Matches"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[h?e.jsx(h,{size:16}):null,"Status"]})}),e.jsx(l,{children:"Actions"})]})}),e.jsx(H,{children:g.map(s=>e.jsxs(I,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("strong",{className:"font-semibold text-foreground",children:s.name}),s.description&&e.jsxs("span",{className:"text-sm text-muted-foreground line-clamp-1",children:[s.description.substring(0,100),s.description.length>100?"...":""]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[e.jsx("span",{children:p(s.startDate)}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsx("span",{children:p(s.endDate)})]})}),e.jsx(i,{children:s.league?e.jsx("span",{className:"text-sm",children:s.league.name}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Not set"})}),e.jsx(i,{children:e.jsx("span",{className:"text-sm",children:s._count.matches})}),e.jsx(i,{children:s.active?e.jsxs(z,{variant:"outline",className:"bg-green-500 text-white border-0 flex items-center gap-1.5 w-fit",children:[h?e.jsx(h,{size:14}):null,"Active"]}):e.jsxs(z,{variant:"outline",className:"bg-slate-500 text-white border-0 flex items-center gap-1.5 w-fit",children:[S?e.jsx(S,{size:14}):null,"Inactive"]})}),e.jsx(i,{children:e.jsxs($,{children:[e.jsx(O,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"h-9 w-9",children:b?e.jsx(b,{size:18}):null})}),e.jsxs(U,{align:"end",children:[e.jsx(D,{asChild:!0,children:e.jsxs("a",{href:`/admin/seasons/${s.id}`,"data-astro-prefetch":!0,children:[N?e.jsx(N,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsxs(D,{onClick:()=>_(s.id),className:"text-destructive focus:text-destructive",children:[C?e.jsx(C,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]},s.id))})]})})]})}export{he as default};
