import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Z6aMusZW.js";import{B as d}from"./button.BWaXVklz.js";import{I as m}from"./input.DYfGnR1o.js";import{L as o}from"./label.ByuxEscq.js";import{T as B}from"./textarea.ntLCWltE.js";import{C as h,a as f,b as p,c as x,d as j}from"./card.YuvTJRVG.js";import{A as C,a as y}from"./alert.BWe5-cIC.js";import{S as u}from"./skeleton.B3vSOSjr.js";import{S as M,a as I,b as P,c as D,d as k}from"./select.B__e_A2K.js";import{B as U}from"./briefcase.Dy88TS9y.js";import{A as G}from"./arrow-left.DTOvvTq7.js";import{C as Y}from"./circle-alert.DSB0BqUH.js";import{C as _}from"./circle-check-big.C0mK4qk5.js";import{I as q}from"./info.COjwR0tB.js";import{L as J}from"./loader-circle.DAcaG-Yh.js";import{S as V}from"./save.BcFhAao1.js";import{X as $}from"./x.B_0Xwiyu.js";import"./utils.CDN07tui.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./index.CTkzGMNT.js";import"./Combination.UCZQMOc2.js";import"./index.D9ngwW3m.js";import"./chevron-up.BnPhcTyb.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";function ve({staffId:t}){const[A,g]=n.useState(!!t),[i,N]=n.useState(!1),[b,c]=n.useState(""),[w,v]=n.useState(!1),[r,l]=n.useState({firstName:"",lastName:"",email:"",phone:"",role:"COACH",bio:"",image:""});n.useEffect(()=>{t&&T()},[t]);const T=async()=>{try{g(!0);const s=await fetch(`/api/staff/${t}`);if(!s.ok)throw new Error("Failed to fetch staff");const a=await s.json();l({firstName:a.firstName,lastName:a.lastName,email:a.email||"",phone:a.phone||"",role:a.role,bio:a.bio||"",image:a.image||""})}catch(s){c(s.message||"Failed to load staff")}finally{g(!1)}},E=async s=>{s.preventDefault(),N(!0),c(""),v(!1);try{const a=t?`/api/staff/${t}`:"/api/staff",L=t?"PUT":"POST",H={firstName:r.firstName.trim(),lastName:r.lastName.trim(),email:r.email.trim()||void 0,phone:r.phone.trim()||void 0,role:r.role,bio:r.bio.trim()||void 0,image:r.image.trim()||void 0},S=await fetch(a,{method:L,headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!S.ok){const O=await S.json();throw new Error(O.error||"Failed to save staff")}v(!0),setTimeout(()=>{window.location.href="/admin/staff"},1500)}catch(a){c(a.message||"Failed to save staff")}finally{N(!1)}};if(A)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{className:"h-12 w-full"}),e.jsx(u,{className:"h-64 w-full"}),e.jsx(u,{className:"h-12 w-full"})]});const R=["COACH","ASSISTANT_COACH","MANAGER","ASSISTANT_MANAGER","PHYSIOTHERAPIST","TRAINER","ANALYST","OTHER"],F=s=>({COACH:"Coach",ASSISTANT_COACH:"Assistant Coach",MANAGER:"Manager",ASSISTANT_MANAGER:"Assistant Manager",PHYSIOTHERAPIST:"Physiotherapist",TRAINER:"Trainer",ANALYST:"Analyst",OTHER:"Other"})[s]||s;return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[e.jsx(U,{className:"h-8 w-8"}),t?"Edit Staff Member":"Create New Staff Member"]}),e.jsx("p",{className:"text-muted-foreground",children:t?"Update staff member details and information":"Add a new staff member to your organization"})]}),e.jsx(d,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/staff","data-astro-prefetch":!0,children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Back to List"]})})]}),b&&e.jsxs(C,{variant:"destructive",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs(y,{children:[e.jsx("strong",{children:"Error:"})," ",b]})]}),w&&e.jsxs(C,{className:"border-green-500 bg-green-50 text-green-900",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsxs(y,{children:[e.jsx("strong",{children:"Success!"})," Staff member saved successfully! Redirecting..."]})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"Basic Information"}),e.jsx(x,{children:"Enter the staff member's details"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"firstName",children:["First Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(m,{id:"firstName",type:"text",value:r.firstName,onChange:s=>l(a=>({...a,firstName:s.target.value})),required:!0,disabled:i,placeholder:"John"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"lastName",children:["Last Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(m,{id:"lastName",type:"text",value:r.lastName,onChange:s=>l(a=>({...a,lastName:s.target.value})),required:!0,disabled:i,placeholder:"Doe"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"role",children:["Role ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(M,{value:r.role,onValueChange:s=>l(a=>({...a,role:s})),required:!0,disabled:i,children:[e.jsx(I,{id:"role",children:e.jsx(P,{placeholder:"Select a role"})}),e.jsx(D,{children:R.map(s=>e.jsx(k,{value:s,children:F(s)},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"image",children:"Image URL"}),e.jsx(m,{id:"image",type:"url",value:r.image,onChange:s=>l(a=>({...a,image:s.target.value})),disabled:i,placeholder:"https://example.com/image.jpg"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"URL to the staff member's photo"]}),r.image&&e.jsx("div",{className:"mt-2 border rounded-lg overflow-hidden",children:e.jsx("img",{src:r.image,alt:"Preview",className:"w-full max-h-[300px] object-contain",onError:s=>{s.target.style.display="none"}})})]})]})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"Contact Information"}),e.jsx(x,{children:"Email and phone details"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",value:r.email,onChange:s=>l(a=>({...a,email:s.target.value})),disabled:i,placeholder:"john.doe@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"phone",children:"Phone"}),e.jsx(m,{id:"phone",type:"tel",value:r.phone,onChange:s=>l(a=>({...a,phone:s.target.value})),disabled:i,placeholder:"+1 (555) 123-4567"})]})]})})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"Biography"}),e.jsx(x,{children:"Brief biography or description"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"bio",children:"Bio"}),e.jsx(B,{id:"bio",rows:6,value:r.bio,onChange:s=>l(a=>({...a,bio:s.target.value})),disabled:i,placeholder:"Enter staff member's biography"})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(d,{type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),t?"Update Staff Member":"Create Staff Member"]})}),e.jsx(d,{type:"button",variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/staff","data-astro-prefetch":!0,children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Cancel"]})})]})]})]})}export{ve as default};
