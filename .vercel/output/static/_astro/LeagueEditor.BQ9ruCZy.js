import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.Z6aMusZW.js";import{B as d}from"./button.BWaXVklz.js";import{I as m}from"./input.DYfGnR1o.js";import{L as n}from"./label.ByuxEscq.js";import{T as C}from"./textarea.ntLCWltE.js";import{C as S,a as L,b as F,c as E,d as A}from"./card.YuvTJRVG.js";import{A as D,a as T}from"./alert.BWe5-cIC.js";import{S as p}from"./skeleton.B3vSOSjr.js";import{S as k,a as U,b as B,c as O,d as f}from"./select.B__e_A2K.js";import{A as P}from"./arrow-left.DTOvvTq7.js";import{C as R}from"./circle-alert.DSB0BqUH.js";import{L as V}from"./loader-circle.DAcaG-Yh.js";import{S as $}from"./save.BcFhAao1.js";import{X as q}from"./x.B_0Xwiyu.js";import"./utils.CDN07tui.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./index.CTkzGMNT.js";import"./Combination.UCZQMOc2.js";import"./index.D9ngwW3m.js";import"./chevron-up.BnPhcTyb.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";function me({leagueId:r}){const[j,h]=l.useState(!!r),[i,u]=l.useState(!1),[g,c]=l.useState(""),[t,o]=l.useState({name:"",slug:"",description:"",logo:"",active:!0});l.useEffect(()=>{r&&v()},[r]);const v=async()=>{try{h(!0);const s=await fetch(`/api/leagues/${r}`);if(!s.ok)throw new Error("Failed to fetch league");const a=await s.json();o({name:a.name,slug:a.slug,description:a.description||"",logo:a.logo||"",active:a.active})}catch(s){c(s.message||"Failed to load league")}finally{h(!1)}},N=async s=>{s.preventDefault(),u(!0),c("");try{const a=r?`/api/leagues/${r}`:"/api/leagues",y=r?"PUT":"POST",w={name:t.name,slug:t.slug||void 0,description:t.description||void 0,logo:t.logo||void 0,active:t.active},x=await fetch(a,{method:y,headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!x.ok){const b=await x.json();throw new Error(b.error||"Failed to save league")}window.location.href="/admin/leagues"}catch(a){c(a.message||"Failed to save league")}finally{u(!1)}};return j?e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"h-12 w-full"}),e.jsx(p,{className:"h-64 w-full"}),e.jsx(p,{className:"h-12 w-full"})]}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground",children:r?"Edit League":"Create New League"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Update league information":"Create a new league"})]}),e.jsx(d,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/leagues","data-astro-prefetch":!0,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back to List"]})})]}),g&&e.jsxs(D,{variant:"destructive",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx(T,{children:g})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs(S,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"League Information"}),e.jsx(E,{children:"Enter the details for this league"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"name",children:["League Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(m,{id:"name",type:"text",value:t.name,onChange:s=>o(a=>({...a,name:s.target.value})),required:!0,disabled:i,placeholder:"League name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"slug",children:"Slug"}),e.jsx(m,{id:"slug",type:"text",value:t.slug,onChange:s=>o(a=>({...a,slug:s.target.value})),placeholder:"Auto-generated from name",disabled:i}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave empty to auto-generate from name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(C,{id:"description",rows:4,value:t.description,onChange:s=>o(a=>({...a,description:s.target.value})),disabled:i,placeholder:"League description"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"logo",children:"Logo URL"}),e.jsx(m,{id:"logo",type:"url",value:t.logo,onChange:s=>o(a=>({...a,logo:s.target.value})),disabled:i,placeholder:"https://example.com/logo.png"}),t.logo&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:t.logo,alt:"Logo preview",className:"h-16 w-16 object-contain border rounded",onError:s=>{s.target.style.display="none"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"active",children:"Status"}),e.jsxs(k,{value:t.active?"true":"false",onValueChange:s=>o(a=>({...a,active:s==="true"})),disabled:i,children:[e.jsx(U,{id:"active",children:e.jsx(B,{})}),e.jsxs(O,{children:[e.jsx(f,{value:"true",children:"Active"}),e.jsx(f,{value:"false",children:"Inactive"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(d,{type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),r?"Update League":"Create League"]})}),e.jsx(d,{type:"button",variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/leagues","data-astro-prefetch":!0,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Cancel"]})})]})]})]})}export{me as default};
