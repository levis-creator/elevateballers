const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lucide-react.elpkBkAp.js","_astro/createLucideIcon.DXTouTbc.js","_astro/index.Z6aMusZW.js","_astro/trophy.D9FOkt9-.js","_astro/arrow-left.DTOvvTq7.js","_astro/briefcase.Dy88TS9y.js","_astro/check.BilKxX2O.js","_astro/chevron-up.BnPhcTyb.js","_astro/chevron-right.CntEDD8B.js","_astro/circle-alert.DSB0BqUH.js","_astro/circle-check-big.C0mK4qk5.js","_astro/circle-x.BXci9Ly8.js","_astro/circle.p2pi6svn.js","_astro/file-text.CSp1dnUh.js","_astro/info.COjwR0tB.js","_astro/loader-circle.DAcaG-Yh.js","_astro/square-pen.CdCizJHo.js","_astro/trash-2.GrLsMpmQ.js","_astro/shield.DPFejS3v.js","_astro/save.BcFhAao1.js","_astro/user.zdQziaxZ.js","_astro/users.DbM1g3zt.js","_astro/x.B_0Xwiyu.js"])))=>i.map(i=>d[i]);
import{_ as B}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Z6aMusZW.js";import{B as m}from"./button.BWaXVklz.js";import{I as R}from"./input.DYfGnR1o.js";import{C as j,a as I}from"./card.CoMIDSCG.js";import{S as V}from"./skeleton.B3vSOSjr.js";import{T as k,a as $,b as D,c as h,d as U,e as x,D as H,f as O,g as q,h as u}from"./dropdown-menu.CVPMSsLz.js";import"./utils.CDN07tui.js";import"./index.lnW5t9aA.js";import"./index.CO5Cc353.js";import"./index.EfZGvMir.js";import"./Combination.LMohFq6j.js";import"./index.DUJzU2eK.js";import"./chevron-right.CntEDD8B.js";import"./createLucideIcon.DXTouTbc.js";import"./check.BilKxX2O.js";import"./circle.p2pi6svn.js";function de(){const[A,L]=i.useState([]),[M,p]=i.useState(!0),[g,l]=i.useState(""),[a,_]=i.useState(""),[r,F]=i.useState({});i.useEffect(()=>{B(()=>import("./lucide-react.elpkBkAp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])).then(s=>{F({Plus:s.Plus,Search:s.Search,Edit:s.Edit,Trash2:s.Trash2,Users:s.Users,AlertCircle:s.AlertCircle,Shield:s.Shield,RefreshCw:s.RefreshCw,MoreVertical:s.MoreVertical,FileText:s.FileText,Eye:s.Eye,Briefcase:s.Briefcase})})},[]),i.useEffect(()=>{f()},[]);const f=async()=>{try{p(!0);const s=await fetch("/api/teams");if(!s.ok)throw new Error("Failed to fetch teams");const d=await s.json();L(d)}catch(s){l(s.message||"Failed to load teams")}finally{p(!1)}},P=async s=>{if(window.confirm(`Are you sure you want to delete this team?

This action cannot be undone. Players associated with this team will have their team reference removed.`))try{if(!(await fetch(`/api/teams/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete team");l(""),f()}catch(z){l("Error deleting team: "+z.message),setTimeout(()=>l(""),5e3)}},N=A.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.description&&s.description.toLowerCase().includes(a.toLowerCase())),n=r.Plus,c=r.Search,w=r.Edit,b=r.Trash2,t=r.Users,v=r.AlertCircle,o=r.Shield,T=r.RefreshCw,C=r.MoreVertical,y=r.FileText,E=r.Eye,S=r.Briefcase;return M?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(V,{className:"h-16 w-full"},s))}):g?e.jsx(j,{className:"border-destructive",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[v?e.jsx(v,{size:24,className:"text-destructive"}):null,e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2",children:"Error Loading Teams"}),e.jsx("p",{className:"text-muted-foreground",children:g})]}),e.jsxs(m,{onClick:f,variant:"default",children:[T?e.jsx(T,{size:18,className:"mr-2"}):null,"Try Again"]})]})})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 pb-6 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-heading font-semibold mb-2 text-foreground flex items-center gap-2",children:[t?e.jsx(t,{size:28}):null,"Teams"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage teams and their information"})]}),e.jsx(m,{asChild:!0,children:e.jsxs("a",{href:"/admin/teams/new","data-astro-prefetch":!0,children:[n?e.jsx(n,{size:18,className:"mr-2"}):null,"Create Team"]})})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"team-search",className:"sr-only",children:"Search teams"}),c?e.jsx(c,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}):null,e.jsx(R,{id:"team-search",type:"text",placeholder:"Search teams...",value:a,onChange:s=>_(s.target.value),className:"pl-10","aria-label":"Search teams by name or description"})]})}),N.length===0?e.jsx(j,{className:"border-dashed",children:e.jsx(I,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-muted-foreground",children:a?c?e.jsx(c,{size:64}):null:t?e.jsx(t,{size:64}):null}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a?"No teams found":"No teams yet"}),e.jsx("p",{className:"text-muted-foreground",children:a?"Try a different search term":"Create your first team to get started"})]}),!a&&e.jsx(m,{asChild:!0,children:e.jsxs("a",{href:"/admin/teams/new","data-astro-prefetch":!0,children:[n?e.jsx(n,{size:18,className:"mr-2"}):null,"Create Team"]})})]})})}):e.jsx(j,{children:e.jsxs(k,{children:[e.jsx($,{children:e.jsxs(D,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx(o,{size:16}):null,"Team"]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(t,{size:16}):null,"Players"]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[y?e.jsx(y,{size:16}):null,"Description"]})}),e.jsx(h,{children:"Actions"})]})}),e.jsx(U,{children:N.map(s=>e.jsxs(D,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.logo?e.jsx("img",{src:s.logo,alt:s.name,className:"w-12 h-12 rounded-lg object-cover border-2 border-border",onError:d=>{d.target.src="/images/placeholder-team.jpg"}}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-muted flex items-center justify-center border-2 border-border",children:o?e.jsx(o,{size:24,className:"text-muted-foreground"}):null}),e.jsx("strong",{className:"font-semibold text-foreground",children:s.name})]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t?e.jsx(t,{size:14}):null,e.jsx("span",{children:s._count?.players||0})]})}),e.jsx(x,{children:s.description?e.jsx("span",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description.length>100?`${s.description.substring(0,100)}...`:s.description}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(x,{children:e.jsxs(H,{children:[e.jsx(O,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"h-9 w-9",children:C?e.jsx(C,{size:18}):null})}),e.jsxs(q,{align:"end",children:[e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/teams/view/${s.id}`,"data-astro-prefetch":!0,children:[E?e.jsx(E,{size:16,className:"mr-2"}):null,"View"]})}),e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/teams/${s.id}`,"data-astro-prefetch":!0,children:[w?e.jsx(w,{size:16,className:"mr-2"}):null,"Edit"]})}),e.jsx(u,{asChild:!0,children:e.jsxs("a",{href:`/admin/teams/view/${s.id}#staff`,"data-astro-prefetch":!0,children:[S?e.jsx(S,{size:16,className:"mr-2"}):null,"Add Staff"]})}),e.jsxs(u,{onClick:()=>P(s.id),className:"text-destructive focus:text-destructive",children:[b?e.jsx(b,{size:16,className:"mr-2"}):null,"Delete"]})]})]})})]},s.id))})]})})]})}export{de as default};
