import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Z6aMusZW.js";function x(){const c=i.useRef(null),a=i.useRef(!1),r=i.useRef(!1),[l,f]=i.useState([]),[o,m]=i.useState(!0);return i.useEffect(()=>{let s=!0;async function d(){try{m(!0);const t=await fetch("/api/news?limit=5");if(!t.ok)throw new Error(`Failed to fetch articles: ${t.status}`);const u=await t.json();if(!s)return;const p=u.slice(0,5).map(n=>{const h=n.publishedAt?new Date(n.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return{id:n.id,title:n.title,date:h,url:`/news/${n.slug}`}});f(p)}catch(t){console.error("Error fetching ticker articles:",t),s&&f([])}finally{s&&m(!1)}}return d(),()=>{s=!1}},[]),i.useEffect(()=>{if(typeof window>"u"||!window.jQuery||l.length===0||o||a.current||r.current)return;r.current=!0;const s=setTimeout(()=>{if(a.current||!c.current){r.current=!1;return}const d=window.jQuery,t=d(c.current);if(t.length&&typeof t.stmTickerPosts=="function")try{a.current=!0,r.current=!1,t.stmTickerPosts({direction:"up",auto_play_speed:1e4,animate_speed:700,count_posts:5})}catch(u){console.error("Error initializing ticker:",u),a.current=!1,r.current=!1}else r.current=!1},300);return()=>{clearTimeout(s),r.current=!1}},[l.length,o]),e.jsx("div",{className:"stmTickerWrapper default",style:{background:"#ffba00"},children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"stmTickerContent",children:[e.jsxs("div",{className:"stmTickerTitle heading-font right",style:{order:2,color:"#0e1d1f"},children:[e.jsx("span",{style:{color:"#ffffff"},children:"ELEVATE"})," NEWS"]}),e.jsx("div",{className:"stmTickerPostsWrapper",children:o?e.jsx("ul",{ref:c,className:"stmTickerPostsList stmTickerPostsListTop",children:e.jsx("li",{className:"tickerItem",children:e.jsx("div",{className:"stm-ticker-post",children:e.jsx("span",{className:"normal_font",children:"Loading latest news..."})})})}):l.length===0?e.jsx("ul",{ref:c,className:"stmTickerPostsList stmTickerPostsListTop",children:e.jsx("li",{className:"tickerItem",children:e.jsx("div",{className:"stm-ticker-post",children:e.jsx("span",{className:"normal_font",children:"No news available"})})})}):e.jsx("ul",{ref:c,className:"stmTickerPostsList stmTickerPostsListTop","data-direction":"up","data-auto_play_speed":"10000","data-animate_speed":"700","data-count-posts":"5",suppressHydrationWarning:!0,children:l.map(s=>e.jsx("li",{className:"tickerItem","data-id":s.id,suppressHydrationWarning:!0,children:e.jsxs("div",{className:"stm-ticker-post",children:[e.jsx("i",{className:"icon-soccer_ico_ticker_post"}),e.jsx("a",{href:s.url,children:e.jsx("span",{className:"normal_font",children:s.title})}),e.jsx("span",{className:"ticker-post-divider normal_font",children:"/"}),e.jsx("span",{children:s.date})]})},s.id))})})]})})})}export{x as default};
